<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>车大邦</title>
<link href="css/jquery.mobile-1.3.2.css" rel="stylesheet" type="text/css"/>
<script src="js/jquery.js" type="text/javascript"></script>
<script src="js/jquery.mobile-1.3.2.js" type="text/javascript"></script>
<script type="text/javascript" src="js/iscroll.js"></script>
</head>
<body>

<div data-role="page">
	<script>
		var count=0; 
		var myScroll,
			pullDownOffset,
			pullUpEl, pullUpOffset,
			generatedCount = 0;                  
		$(document).on("pageinit",function(){
				var name = window.localStorage.getItem("carName");
				var url = "http://localhost:8080/cheDBService/queryBuynoteByUserId.do?userId="+name+"&page=0&callback=call";
				$.ajax({
					type: "POST",
					async: false,
					url: url,
					dataType:"jsonp",
					jsonp:"callback",
					jsonpCallback:"call",
					success: function(json){
						var el, li, span, div1,div2;
						el = document.getElementById('thelist');
						$.each(json,function(i,n){

							var className = n.serviceClassName!='undefined'?n.serviceClassName:'';
							var serviceName = n.serviceName!='undefined'?n.serviceName:'';
							var buynoteNo = n.buynoteNo!='undefined'?n.buynoteNo:'';
							var money = n.price!='undefined'?n.price:'';
							var status = n.status!='undefined'?n.status:'';
							var providerId = n.providerId!='undefined'?n.provicerId:'';
							var providerName = n.providerName!='undefined'?n.providerName:'';
							var payTypeName = n.payTypeName!='undefined'?n.payTypeName:'';
							var returnJifen = n.returnJifen!='undefinde'?n.returnJifen:0;
							
							li = document.createElement('li');
							span = document.createElement('span');
							span.innerHTML="&nbsp;&nbsp;<a data-transition='slide' style='background-color:#BFBFC1;color:#FFF;'>"+className+"</a>&nbsp;&nbsp;&nbsp;<a data-transition='slide' style='color:#000; font-size:18px'>"+serviceName+"</a><br><br>";
							li.appendChild(span);
							
							span = document.createElement('span');
							span.innerHTML="&nbsp;&nbsp;订单号:"+buynoteNo+"<br><br>";
							li.appendChild(span);
							
							div1 = document.createElement('div');
							div1.setAttribute('class','ui-grid-a');
							
							div2 = document.createElement('div');
							div2.setAttribute('class','ui-block-a');
							span = document.createElement('span');
							span.innerHTML="&nbsp;&nbsp;<font style='color:red;'>"+payTypeName+"</font>&nbsp;&nbsp;&nbsp;￥"+money+"元";
							div2.appendChild(span);
							div1.appendChild(div2);
							
							div2 = document.createElement('div');
							div2.setAttribute('class','ui-block-b');
							span = document.createElement('span');
							span.setAttribute('style','float:right; margin:10px;');
							if (returnJifen==0)
								span.innerHTML="不返积分";
							else
								span.innerHTML="'完成'后返"+returnJifen+"积分";
							div2.appendChild(span);							
							div1.appendChild(div2);
							
							li.appendChild(div1);
							if (status==1){
								div1 = document.createElement('div');
								div1.setAttribute('class','ui-grid-c');
								
								div2 = document.createElement('div');
								div2.setAttribute('style','width:23%');
								div2.setAttribute('class','ui-block-a');
								div2.innerHTML = "<a style='border-color:#060' class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>支付</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
								
								div2 = document.createElement('div');
								div2.setAttribute('style','width:31%');
								div2.setAttribute('class','ui-block-b');
								div2.innerHTML = "<a class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>商家确认</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
								
								div2 = document.createElement('div');
								div2.setAttribute('style','width:23%');
								div2.setAttribute('class','ui-block-c');
								div2.innerHTML = "<a class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>完成</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
								
								div2 = document.createElement('div');
								div2.setAttribute('style','width:23%');
								div2.setAttribute('class','ui-block-d');
								div2.innerHTML = "<a class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>打分</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
							}else if (status==2){
								div1 = document.createElement('div');
								div1.setAttribute('class','ui-grid-c');
								
								div2 = document.createElement('div');
								div2.setAttribute('style','width:23%');
								div2.setAttribute('class','ui-block-a');
								div2.innerHTML = "<a style='border-color:#060' class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>支付</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
								
								div2 = document.createElement('div');
								div2.setAttribute('style','width:31%');
								div2.setAttribute('class','ui-block-b');
								div2.innerHTML = "<a style='border-color:#060' class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>商家确认</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
								
								div2 = document.createElement('div');
								div2.setAttribute('style','width:23%');
								div2.setAttribute('class','ui-block-c');
								div2.innerHTML = "<a class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>完成</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
								
								div2 = document.createElement('div');
								div2.setAttribute('style','width:23%');
								div2.setAttribute('class','ui-block-d');
								div2.innerHTML = "<a class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>打分</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
							}else if (status==3){
								div1 = document.createElement('div');
								div1.setAttribute('class','ui-grid-c');
								
								div2 = document.createElement('div');
								div2.setAttribute('style','width:23%');
								div2.setAttribute('class','ui-block-a');
								div2.innerHTML = "<a style='border-color:#060' class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>支付</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
								
								div2 = document.createElement('div');
								div2.setAttribute('style','width:31%');
								div2.setAttribute('class','ui-block-b');
								div2.innerHTML = "<a style='border-color:#060' class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>商家确认</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
								
								div2 = document.createElement('div');
								div2.setAttribute('style','width:23%');
								div2.setAttribute('class','ui-block-c');
								div2.innerHTML = "<a style='border-color:#060' class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>完成</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
								
								div2 = document.createElement('div');
								div2.setAttribute('style','width:23%');
								div2.setAttribute('class','ui-block-d');
								div2.innerHTML = "<a class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>打分</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
							}else if (status==4){
								div1 = document.createElement('div');
								div1.setAttribute('class','ui-grid-c');
								
								div2 = document.createElement('div');
								div2.setAttribute('style','width:23%');
								div2.setAttribute('class','ui-block-a');
								div2.innerHTML = "<a style='border-color:#060' class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>支付</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
								
								div2 = document.createElement('div');
								div2.setAttribute('style','width:31%');
								div2.setAttribute('class','ui-block-b');
								div2.innerHTML = "<a style='border-color:#060' class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>商家确认</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
								
								div2 = document.createElement('div');
								div2.setAttribute('style','width:23%');
								div2.setAttribute('class','ui-block-c');
								div2.innerHTML = "<a style='border-color:#060' class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>完成</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
								
								div2 = document.createElement('div');
								div2.setAttribute('style','width:23%');
								div2.setAttribute('class','ui-block-d');
								div2.innerHTML = "<a style='border-color:#060' class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>打分</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
							}else{
								div1 = document.createElement('div');
								div1.setAttribute('class','ui-grid-c');
								
								div2 = document.createElement('div');
								div2.setAttribute('style','width:23%');
								div2.setAttribute('class','ui-block-a');
								div2.innerHTML = "<a class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>支付</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
								
								div2 = document.createElement('div');
								div2.setAttribute('style','width:31%');
								div2.setAttribute('class','ui-block-b');
								div2.innerHTML = "<a class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>商家确认</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
								
								div2 = document.createElement('div');
								div2.setAttribute('style','width:23%');
								div2.setAttribute('class','ui-block-c');
								div2.innerHTML = "<a class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>完成</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
								
								div2 = document.createElement('div');
								div2.setAttribute('style','width:23%');
								div2.setAttribute('class','ui-block-d');
								div2.innerHTML = "<a class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>打分</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
							}
							
							if (status==1){	
								div1 = document.createElement('div');
								div1.setAttribute('class','ui-grid-a');						
								div2 = document.createElement('div');
								div2.setAttribute('class','ui-block-a');
								div2.innerHTML = "<a style='background:#360; color:#FFF;' class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>刷新</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
								
								div2 = document.createElement('div');
								div2.setAttribute('class','ui-block-b');
								div2.innerHTML = "<a style='float:right;background:#360; color:#FFF;' class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>取消确认</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
							}else if(status==0){
								div1 = document.createElement('div');
								div1.setAttribute('class','ui-grid-a');		
								div2 = document.createElement('div');
								div2.setAttribute('class','ui-block-a');
								div2.innerHTML = "<a class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>订单已被取消</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
							}else if(status==2){
								div1 = document.createElement('div');
								div1.setAttribute('class','ui-grid-a');		
								div2 = document.createElement('div');
								div2.setAttribute('class','ui-block-a');
								div1.appendChild(div2);
								div2 = document.createElement('div');
								div2.setAttribute('class','ui-block-b');
								div2.innerHTML = "<a style='float:right;background:#360; color:#FFF;' class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>完成</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
							}else if (status==3){
								div1 = document.createElement('div');
								div1.setAttribute('class','ui-grid-d');	
								div2 = document.createElement('div');
								div2.setAttribute('style','width:20%');
								div2.setAttribute('class','ui-block-a');
								div2.innerHTML = "<a class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-e' data-inline='true' data-theme='e' data-role='button' data-shadow='true' data-iconshadow='true' data-wrapperels='span'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>1分</font></span></span></a>";
								div1.appendChild(div2);
								div2 = document.createElement('div');
								div2.setAttribute('style','width:20%');
								div2.setAttribute('class','ui-block-b');
								div2.innerHTML = "<a class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-e' data-inline='true' data-theme='e' data-role='button' data-shadow='true' data-iconshadow='true' data-wrapperels='span'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>2分</font></span></span></a>";
								div1.appendChild(div2);
								div2 = document.createElement('div');
								div2.setAttribute('style','width:20%');
								div2.setAttribute('class','ui-block-c');
								div2.innerHTML = "<a class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-e' data-inline='true' data-theme='e' data-role='button' data-shadow='true' data-iconshadow='true' data-wrapperels='span'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>3分</font></span></span></a>";
								div1.appendChild(div2);
								div2 = document.createElement('div');
								div2.setAttribute('style','width:20%');
								div2.setAttribute('class','ui-block-d');
								div2.innerHTML = "<a class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-e' data-inline='true' data-theme='e' data-role='button' data-shadow='true' data-iconshadow='true' data-wrapperels='span'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>4分</font></span></span></a>";
								div1.appendChild(div2);
								div2 = document.createElement('div');
								div2.setAttribute('style','width:20%');
								div2.setAttribute('class','ui-block-e');
								div2.innerHTML = "<a class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-e' data-inline='true' data-theme='e' data-role='button' data-shadow='true' data-iconshadow='true' data-wrapperels='span'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>5分</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
							}else{
								div1 = document.createElement('div');
								div1.setAttribute('class','ui-grid-a');		
								div2 = document.createElement('div');
								div2.setAttribute('class','ui-block-a');
								div1.appendChild(div2);
								div2 = document.createElement('div');
								div2.setAttribute('class','ui-block-b');
								div2.innerHTML = "<a style='float:right;' class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>已完成</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
							}
							div1 = document.createElement('div');
							span = document.createElement('span');
							span.innerHTML="&nbsp;&nbsp;<a href='#' style='text-decoration:none;'><font size='+1'>"+providerName+"</font></a>";
							div1.appendChild(span);
							li.appendChild(div1);
							
							el.appendChild(li, el.childNodes[0]);
							count++;	
						});
					}
				});
				
		});
		
		
		function pullUpAction () {
			setTimeout(function () {	// <-- Simulate network congestion, remove setTimeout from production!
				var name = window.localStorage.getItem("carName");
				var url = "http://localhost:8080/cheDBService/queryBuynoteByUserId.do?userId="+name+"&page="+count+"&callback=call";
				$.ajax({
					type: "POST",
					async: false,
					url: url,
					dataType:"jsonp",
					jsonp:"callback",
					jsonpCallback:"call",
					success: function(json){
						var el, li, span, div1,div2;
						el = document.getElementById('thelist');
						$.each(json,function(i,n){

							var className = n.serviceClassName!='undefined'?n.serviceClassName:'';
							var serviceName = n.serviceName!='undefined'?n.serviceName:'';
							var buynoteNo = n.buynoteNo!='undefined'?n.buynoteNo:'';
							var money = n.price!='undefined'?n.price:'';
							var status = n.status!='undefined'?n.status:'';
							var providerId = n.providerId!='undefined'?n.provicerId:'';
							var providerName = n.providerName!='undefined'?n.providerName:'';
							var payTypeName = n.payTypeName!='undefined'?n.payTypeName:'';
							var returnJifen = n.returnJifen!='undefinde'?n.returnJifen:0;
							
							li = document.createElement('li');
							span = document.createElement('span');
							span.innerHTML="&nbsp;&nbsp;<a data-transition='slide' style='background-color:#BFBFC1;color:#FFF;'>"+className+"</a>&nbsp;&nbsp;&nbsp;<a data-transition='slide' style='color:#000; font-size:18px'>"+serviceName+"</a><br><br>";
							li.appendChild(span);
							
							span = document.createElement('span');
							span.innerHTML="&nbsp;&nbsp;订单号:"+buynoteNo+"<br><br>";
							li.appendChild(span);
							
							div1 = document.createElement('div');
							div1.setAttribute('class','ui-grid-a');
							
							div2 = document.createElement('div');
							div2.setAttribute('class','ui-block-a');
							span = document.createElement('span');
							span.innerHTML="&nbsp;&nbsp;<font style='color:red;'>"+payTypeName+"</font>&nbsp;&nbsp;&nbsp;￥"+money+"元";
							div2.appendChild(span);
							div1.appendChild(div2);
							
							div2 = document.createElement('div');
							div2.setAttribute('class','ui-block-b');
							span = document.createElement('span');
							span.setAttribute('style','float:right; margin:10px;');
							if (returnJifen==0)
								span.innerHTML="不返积分";
							else
								span.innerHTML="'完成'后返"+returnJifen+"积分";
							div2.appendChild(span);							
							div1.appendChild(div2);
							
							li.appendChild(div1);
							if (status==1){
								div1 = document.createElement('div');
								div1.setAttribute('class','ui-grid-c');
								
								div2 = document.createElement('div');
								div2.setAttribute('style','width:23%');
								div2.setAttribute('class','ui-block-a');
								div2.innerHTML = "<a style='border-color:#060' class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>支付</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
								
								div2 = document.createElement('div');
								div2.setAttribute('style','width:31%');
								div2.setAttribute('class','ui-block-b');
								div2.innerHTML = "<a class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>商家确认</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
								
								div2 = document.createElement('div');
								div2.setAttribute('style','width:23%');
								div2.setAttribute('class','ui-block-c');
								div2.innerHTML = "<a class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>完成</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
								
								div2 = document.createElement('div');
								div2.setAttribute('style','width:23%');
								div2.setAttribute('class','ui-block-d');
								div2.innerHTML = "<a class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>打分</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
							}else if (status==2){
								div1 = document.createElement('div');
								div1.setAttribute('class','ui-grid-c');
								
								div2 = document.createElement('div');
								div2.setAttribute('style','width:23%');
								div2.setAttribute('class','ui-block-a');
								div2.innerHTML = "<a style='border-color:#060' class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>支付</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
								
								div2 = document.createElement('div');
								div2.setAttribute('style','width:31%');
								div2.setAttribute('class','ui-block-b');
								div2.innerHTML = "<a style='border-color:#060' class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>商家确认</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
								
								div2 = document.createElement('div');
								div2.setAttribute('style','width:23%');
								div2.setAttribute('class','ui-block-c');
								div2.innerHTML = "<a class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>完成</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
								
								div2 = document.createElement('div');
								div2.setAttribute('style','width:23%');
								div2.setAttribute('class','ui-block-d');
								div2.innerHTML = "<a class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>打分</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
							}else if (status==3){
								div1 = document.createElement('div');
								div1.setAttribute('class','ui-grid-c');
								
								div2 = document.createElement('div');
								div2.setAttribute('style','width:23%');
								div2.setAttribute('class','ui-block-a');
								div2.innerHTML = "<a style='border-color:#060' class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>支付</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
								
								div2 = document.createElement('div');
								div2.setAttribute('style','width:31%');
								div2.setAttribute('class','ui-block-b');
								div2.innerHTML = "<a style='border-color:#060' class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>商家确认</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
								
								div2 = document.createElement('div');
								div2.setAttribute('style','width:23%');
								div2.setAttribute('class','ui-block-c');
								div2.innerHTML = "<a style='border-color:#060' class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>完成</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
								
								div2 = document.createElement('div');
								div2.setAttribute('style','width:23%');
								div2.setAttribute('class','ui-block-d');
								div2.innerHTML = "<a class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>打分</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
							}else if (status==4){
								div1 = document.createElement('div');
								div1.setAttribute('class','ui-grid-c');
								
								div2 = document.createElement('div');
								div2.setAttribute('style','width:23%');
								div2.setAttribute('class','ui-block-a');
								div2.innerHTML = "<a style='border-color:#060' class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>支付</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
								
								div2 = document.createElement('div');
								div2.setAttribute('style','width:31%');
								div2.setAttribute('class','ui-block-b');
								div2.innerHTML = "<a style='border-color:#060' class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>商家确认</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
								
								div2 = document.createElement('div');
								div2.setAttribute('style','width:23%');
								div2.setAttribute('class','ui-block-c');
								div2.innerHTML = "<a style='border-color:#060' class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>完成</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
								
								div2 = document.createElement('div');
								div2.setAttribute('style','width:23%');
								div2.setAttribute('class','ui-block-d');
								div2.innerHTML = "<a style='border-color:#060' class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>打分</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
							}else{
								div1 = document.createElement('div');
								div1.setAttribute('class','ui-grid-c');
								
								div2 = document.createElement('div');
								div2.setAttribute('style','width:23%');
								div2.setAttribute('class','ui-block-a');
								div2.innerHTML = "<a class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>支付</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
								
								div2 = document.createElement('div');
								div2.setAttribute('style','width:31%');
								div2.setAttribute('class','ui-block-b');
								div2.innerHTML = "<a class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>商家确认</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
								
								div2 = document.createElement('div');
								div2.setAttribute('style','width:23%');
								div2.setAttribute('class','ui-block-c');
								div2.innerHTML = "<a class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>完成</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
								
								div2 = document.createElement('div');
								div2.setAttribute('style','width:23%');
								div2.setAttribute('class','ui-block-d');
								div2.innerHTML = "<a class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>打分</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
							}
							
							if (status==1){	
								div1 = document.createElement('div');
								div1.setAttribute('class','ui-grid-a');						
								div2 = document.createElement('div');
								div2.setAttribute('class','ui-block-a');
								div2.innerHTML = "<a style='background:#360; color:#FFF;' class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>刷新</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
								
								div2 = document.createElement('div');
								div2.setAttribute('class','ui-block-b');
								div2.innerHTML = "<a style='float:right;background:#360; color:#FFF;' class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>取消确认</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
							}else if(status==0){
								div1 = document.createElement('div');
								div1.setAttribute('class','ui-grid-a');		
								div2 = document.createElement('div');
								div2.setAttribute('class','ui-block-a');
								div2.innerHTML = "<a class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>订单已被取消</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
							}else if(status==2){
								div1 = document.createElement('div');
								div1.setAttribute('class','ui-grid-a');		
								div2 = document.createElement('div');
								div2.setAttribute('class','ui-block-a');
								div1.appendChild(div2);
								div2 = document.createElement('div');
								div2.setAttribute('class','ui-block-b');
								div2.innerHTML = "<a style='float:right;background:#360; color:#FFF;' class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>完成</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
							}else if (status==3){
								div1 = document.createElement('div');
								div1.setAttribute('class','ui-grid-d');	
								div2 = document.createElement('div');
								div2.setAttribute('style','width:20%');
								div2.setAttribute('class','ui-block-a');
								div2.innerHTML = "<a class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-e' data-inline='true' data-theme='e' data-role='button' data-shadow='true' data-iconshadow='true' data-wrapperels='span'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>1分</font></span></span></a>";
								div1.appendChild(div2);
								div2 = document.createElement('div');
								div2.setAttribute('style','width:20%');
								div2.setAttribute('class','ui-block-b');
								div2.innerHTML = "<a class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-e' data-inline='true' data-theme='e' data-role='button' data-shadow='true' data-iconshadow='true' data-wrapperels='span'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>2分</font></span></span></a>";
								div1.appendChild(div2);
								div2 = document.createElement('div');
								div2.setAttribute('style','width:20%');
								div2.setAttribute('class','ui-block-c');
								div2.innerHTML = "<a class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-e' data-inline='true' data-theme='e' data-role='button' data-shadow='true' data-iconshadow='true' data-wrapperels='span'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>3分</font></span></span></a>";
								div1.appendChild(div2);
								div2 = document.createElement('div');
								div2.setAttribute('style','width:20%');
								div2.setAttribute('class','ui-block-d');
								div2.innerHTML = "<a class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-e' data-inline='true' data-theme='e' data-role='button' data-shadow='true' data-iconshadow='true' data-wrapperels='span'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>4分</font></span></span></a>";
								div1.appendChild(div2);
								div2 = document.createElement('div');
								div2.setAttribute('style','width:20%');
								div2.setAttribute('class','ui-block-e');
								div2.innerHTML = "<a class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-e' data-inline='true' data-theme='e' data-role='button' data-shadow='true' data-iconshadow='true' data-wrapperels='span'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>5分</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
							}else{
								div1 = document.createElement('div');
								div1.setAttribute('class','ui-grid-a');		
								div2 = document.createElement('div');
								div2.setAttribute('class','ui-block-a');
								div1.appendChild(div2);
								div2 = document.createElement('div');
								div2.setAttribute('class','ui-block-b');
								div2.innerHTML = "<a style='float:right;' class='ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c' data-inline='true' data-role='button' data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-theme='c'><span class='ui-btn-inner'><span class='ui-btn-text'><font size='-1'>已完成</font></span></span></a>";
								div1.appendChild(div2);
								li.appendChild(div1);
							}
							div1 = document.createElement('div');
							span = document.createElement('span');
							span.innerHTML="&nbsp;&nbsp;<a href='#' style='text-decoration:none;'><font size='+1'>"+providerName+"</font></a>";
							div1.appendChild(span);
							li.appendChild(div1);
							
							el.appendChild(li, el.childNodes[0]);
							count++;		
						});
					}
				})
				myScroll.refresh();		// Remember to refresh when contents are loaded (ie: on ajax completion)
			}, 1000);	// <-- Simulate network congestion, remove setTimeout from production!
		}
		
		function loaded() {
			pullUpEl = document.getElementById('pullUp');	
			pullUpOffset = pullUpEl.offsetHeight;
			
			myScroll = new iScroll('wrapper', {
				useTransition: true,
				topOffset: pullDownOffset,
				onRefresh: function () {
					if (pullUpEl.className.match('loading')) {
						pullUpEl.className = '';
						pullUpEl.querySelector('.pullUpLabel').innerHTML = 'Pull up to load more...';
					}
				},
				onScrollMove: function () {
					if (this.y < (this.maxScrollY - 5) && !pullUpEl.className.match('flip')) {
						pullUpEl.className = 'flip';
						pullUpEl.querySelector('.pullUpLabel').innerHTML = 'Release to refresh...';
						this.maxScrollY = this.maxScrollY;
					} else if (this.y > (this.maxScrollY + 5) && pullUpEl.className.match('flip')) {
						pullUpEl.className = '';
						pullUpEl.querySelector('.pullUpLabel').innerHTML = 'Pull up to load more...';
						this.maxScrollY = pullUpOffset;
					}
				},
				onScrollEnd: function () {
					if (pullUpEl.className.match('flip')) {
						pullUpEl.className = 'loading';
						pullUpEl.querySelector('.pullUpLabel').innerHTML = 'Loading...';				
						pullUpAction();	// Execute custom function (ajax call?)
					}
				}
			});
			
			setTimeout(function () { document.getElementById('wrapper').style.left = '0'; }, 800);
		}
		
		document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);
		
		document.addEventListener('DOMContentLoaded', function () { setTimeout(loaded, 200); }, false);
	
	</script>

  	<div data-role="header" data-theme="b" data-position="fixed">
    	<a data-transition="slide" data-direction="reverse" data-role="button" data-rel="back" data-icon="arrow-l" data-iconpos="left" data-inline="true">返回</a>
		<h1>业务记录</h1>
	</div>

	<div id="wrapper">
    	<div id="scroller">
            <ul data-role="listview" id="thelist">

            </ul>
            <div id="pullUp">
                <span class="pullUpIcon"></span><span class="pullUpLabel">Pull up to refresh...</span>
            </div>
        </div>
    </div>
  	<div data-role="footer" data-position="fixed">
		<h4>车大邦</h4>
	</div>
        <style type="text/css" media="all">
body,ul,li {
	padding:0;
	margin:0;
	border:0;
}

body {
	font-size:12px;
	-webkit-user-select:none;
    -webkit-text-size-adjust:none;
	font-family:helvetica;
}

#header {
	position:absolute; z-index:2;
	top:0; left:0;
	width:100%;
	height:45px;
	line-height:45px;
	background-color:#d51875;
	background-image:-webkit-gradient(linear, 0 0, 0 100%, color-stop(0, #fe96c9), color-stop(0.05, #d51875), color-stop(1, #7b0a2e));
	background-image:-moz-linear-gradient(top, #fe96c9, #d51875 5%, #7b0a2e);
	background-image:-o-linear-gradient(top, #fe96c9, #d51875 5%, #7b0a2e);
	padding:0;
	color:#eee;
	font-size:20px;
	text-align:center;
}

#header a {
	color:#f3f3f3;
	text-decoration:none;
	font-weight:bold;
	text-shadow:0 -1px 0 rgba(0,0,0,0.5);
}

#footer {
	position:absolute; z-index:2;
	bottom:0; left:0;
	width:100%;
	height:48px;
	background-color:#222;
	background-image:-webkit-gradient(linear, 0 0, 0 100%, color-stop(0, #999), color-stop(0.02, #666), color-stop(1, #222));
	background-image:-moz-linear-gradient(top, #999, #666 2%, #222);
	background-image:-o-linear-gradient(top, #999, #666 2%, #222);
	padding:0;
	border-top:1px solid #444;
}

#wrapper {
	position:absolute; z-index:1;
	top:45px; bottom:48px; left:-9999px;
	width:100%;
	background:#aaa;
	overflow:auto;
}

#scroller {
	position:absolute; z-index:1;
/*	-webkit-touch-callout:none;*/
	-webkit-tap-highlight-color:rgba(0,0,0,0);
	width:100%;
	padding:0;
}

#scroller ul {
	list-style:none;
	padding:0;
	margin:0;
	width:100%;
	text-align:left;
}

#scroller li {
	padding:0 10px;
	height:280px;
	line-height:20px;
	border-bottom:1px solid #ccc;
	border-top:1px solid #fff;
	background-color:#fafafa;
	font-size:14px;
}

#myFrame {
	position:absolute;
	top:0; left:0;
}



/**
 *
 * Pull down styles
 *
 */
#pullDown, #pullUp {
	background:#fff;
	height:40px;
	line-height:40px;
	padding:5px 10px;
	border-bottom:1px solid #ccc;
	font-weight:bold;
	font-size:14px;
	color:#888;
}
#pullDown .pullDownIcon, #pullUp .pullUpIcon  {
	display:block; float:left;
	width:40px; height:40px;
	background:url(images/pull-icon@2x.png) 0 0 no-repeat;
	-webkit-background-size:40px 80px; background-size:40px 80px;
	-webkit-transition-property:-webkit-transform;
	-webkit-transition-duration:250ms;	
}
#pullDown .pullDownIcon {
	-webkit-transform:rotate(0deg) translateZ(0);
}
#pullUp .pullUpIcon  {
	-webkit-transform:rotate(-180deg) translateZ(0);
}

#pullDown.flip .pullDownIcon {
	-webkit-transform:rotate(-180deg) translateZ(0);
}

#pullUp.flip .pullUpIcon {
	-webkit-transform:rotate(0deg) translateZ(0);
}

#pullDown.loading .pullDownIcon, #pullUp.loading .pullUpIcon {
	background-position:0 100%;
	-webkit-transform:rotate(0deg) translateZ(0);
	-webkit-transition-duration:0ms;

	-webkit-animation-name:loading;
	-webkit-animation-duration:2s;
	-webkit-animation-iteration-count:infinite;
	-webkit-animation-timing-function:linear;
}

@-webkit-keyframes loading {
	from { -webkit-transform:rotate(0deg) translateZ(0); }
	to { -webkit-transform:rotate(360deg) translateZ(0); }
}

</style>
</div> 

</body>
</html>